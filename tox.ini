[tox]
envlist=code-check, unused-code
skipsdist=True

[testenv:code-check]
basepython = python3
setenv =
    PYTHONPATH = {toxinidir}
deps=
    pre-commit
    gitlint
commands =
    pip install pip --upgrade
    pip install tox --upgrade
    pre-commit clean
    pre-commit run --all-files
    gitlint
    rm -rf {envdir}
whitelist_externals =
    rm
    git

#Unused code
[testenv:unused-code]
basepython = python3
setenv =
    PYTHONPATH = {toxinidir}
deps:
    GitPython
    urllib3
commands =
    pip install pip --upgrade
    pip install tox --upgrade
    python3 scripts/code_check/unused_code.py
    rm -rf {envdir}
whitelist_externals =
    rm
